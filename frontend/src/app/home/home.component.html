

<app-slider></app-slider>


<!-- ======================= قسم البانرات الترويجية ======================= -->
<section class="promo-banners-section">
  <div class="container">
    <div class="banners-grid">

      <div class="banner-card quad-banner">
        <h4>اشتري اكتر وبالك مرتاح</h4>
        <div class="quad-banner-grid">

          <a href="/product-category-1" class="quad-item">
            <img src="https://f.nooncdn.com/mpcms/EN0003/assets/cfbfc258-3b6c-458b-9fdf-43b8d3eca3b2.png" alt="منتج 1">
          </a>

          <a href="/product-category-2" class="quad-item">
            <img src="https://f.nooncdn.com/mpcms/EN0003/assets/22bed08a-1a38-4f5d-adb7-f02779f64068.png" alt="منتج 2">
          </a>

          <a href="/product-category-3" class="quad-item">
            <img src="https://f.nooncdn.com/mpcms/EN0003/assets/ec87f061-cc2c-46e7-96e5-c6a4c9195522.png" alt="منتج 3">
          </a>

          <a href="/product-category-4" class="quad-item">
            <img src="https://f.nooncdn.com/mpcms/EN0003/assets/2d3f6cac-3eef-418c-8fee-65fd8638c580.png" alt="منتج 4">
          </a>

        </div>
      </div>

      <div class="banner-card quad-banner">
        <h4>عروض ميجا</h4>
        <div class="quad-banner-grid">

          <a href="/product-category-1" class="quad-item">
            <img src="https://f.nooncdn.com/p/pzsku/Z09BC59F7E93A1C2ED6AFZ/45/_/1738751026/5dd4f7ff-edee-4962-b049-354b927c630b.jpg?width=240" alt="منتج 1">
          </a>

          <a href="/product-category-2" class="quad-item">
            <img src="https://f.nooncdn.com/p/pnsku/N70165067V/45/_/1743069876/f14f089e-5f9d-4ae4-b3b8-9c5ac91ba7af.jpg?width=240" alt="منتج 2">
          </a>

          <a href="/product-category-3" class="quad-item">
            <img src="https://f.nooncdn.com/p/pzsku/ZA30EC9C48854AC7D9C9CZ/45/_/1722930037/c6342f80-b070-470f-ad68-1abae1e8cf05.jpg?width=240" alt="منتج 3">
          </a>

          <a href="/product-category-4" class="quad-item">
            <img src="https://f.nooncdn.com/p/pzsku/Z900E38B43F222302BB29Z/45/1742728230/74831566-43f1-472d-802c-502fcd214742.jpg?width=240" alt="منتج 4">
          </a>

        </div>
      </div>

      <div class="banner-card duo-banner">
        <h4>شوف كل الخصومات</h4>
        <div class="duo-banner-grid">

          <a href="/product-category-1" class="duo-item">
            <img src="https://f.nooncdn.com/mpcms/EN0003/assets/55230b52-36a2-48e1-8e2e-935501a371ec.png" alt="منتج 1">
          </a>

          <a href="/product-category-2" class="duo-item">
            <img src="https://f.nooncdn.com/mpcms/EN0003/assets/5e796bf3-b722-4302-a802-69ec5223c4d4.png" alt="منتج 2">
          </a>

        </div>
      </div>

    </div>
  </div>
</section>


<!-- ======================= قسم "مقترحة لك" (ديناميكي) ======================= -->
<section class="recommendations-section" *ngIf="(products$ | async) as products">
  <div class="container" *ngIf="products.length > 0; else loadingOrError">
    <div class="section-header">
      <h2 class="section-title"> مقترحه لك</h2>
    </div>

    <div class="carousel-container">
      <button class="carousel-arrow prev" (click)="scrollCarousel(-300)">
        <mat-icon>chevron_left</mat-icon>
      </button>

      <div class="products-carousel" #productCarousel>
        <div *ngFor="let product of products" class="product-card">
          <a [routerLink]="['/product', product._id]" class="product-link">
            <div class="product-image-container image-slider">
              <button type="button" class="image-arrow left" (click)="prevImage(product, $event)">›</button>

              <img [src]="getCurrentImage(product)" [alt]="product.name">

              <button type="button" class="image-arrow right" (click)="nextImage(product, $event)">‹</button>

              <div *ngIf="product.isExpress" class="express-badge">
                <img src="https://f.nooncdn.com/s/app/com/noon/images/fulfilment_express_v2-en.svg" alt="Express">
              </div>
            </div>

            <div class="product-info">
              <p class="product-name">{{ product.name }}</p>
              <div class="product-price">
                <span class="current-price">{{ product.pricing.price | currency:'EGP ' }}</span>
                <span *ngIf="product.pricing.comparePrice > product.pricing.price" class="original-price">{{
                  product.pricing.comparePrice | currency:'EGP ' }}</span>
              </div>
              <div class="rating" *ngIf="product.rating.count > 0">
                <span class="stars">★★★★☆</span>
                <span class="rating-count">({{ product.rating.count }})</span>
              </div>
            </div>
          </a>
          <button class="add-to-cart-btn" mat-icon-button (click)="addToCart(product, $event)">
            <mat-icon>shopping_cart</mat-icon>
          </button>
        </div>
      </div>

      <button class="carousel-arrow next" (click)="scrollCarousel(300)">
        <mat-icon>chevron_right</mat-icon>
      </button>
    </div>

  </div>
</section>

<ng-template #loadingOrError>
  <div *ngIf="productsError; else loading" class="error-message">
    <p>{{ productsError }}</p>
  </div>
  <ng-template #loading>
    <div class="center-spinner">
    </div>
  </ng-template>
</ng-template>




<!--************ البرندات************-->

<section class="official-store-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title"><span>شوف</span> استور البراندات الرسمية</h2>
    </div>

    <div class="carousel-wrapper">
      <button class="carousel-arrow prev" (click)="scrollBrands(-1)">
        <mat-icon>chevron_left</mat-icon>
      </button>

      <!-- ================== المرجع الآن هنا ================== -->
      <div class="brands-carousel-container" #brandCarousel>

        <!-- هذه الشبكة لم تعد بحاجة لمرجع -->
        <div class="brands-grid">
          <div class="brand-card" *ngFor="let brand of brands">
            <a [href]="brand.link" target="_blank">
              <img [src]="brand.logo" [alt]="brand.name" />
            </a>
          </div>
        </div>
      </div>
      <!-- ======================================================= -->

      <button class="carousel-arrow next" (click)="scrollBrands(1)">
        <mat-icon>chevron_right</mat-icon>
      </button>
    </div>
  </div>
</section>




<app-section></app-section>

